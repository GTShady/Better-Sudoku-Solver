<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Sudoku Solver</title>
<style>
  body {
    font-family: sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    margin-top: 40px;
  }
  table {
    border-collapse: collapse;
  }
  td {
    border: 1px solid #444;
    width: 40px;
    height: 40px;
    text-align: center;
  }
  input {
    width: 38px;
    height: 38px;
    text-align: center;
    font-size: 20px;
    border: none;
  }
  /* bold 3Ã—3 borders */
  td:nth-child(3), td:nth-child(6) {
    border-right: 3px solid black;
  }
  tr:nth-child(3) td, tr:nth-child(6) td {
    border-bottom: 3px solid black;
  }
  button {
    margin-top: 20px;
    padding: 10px 20px;
    font-size: 18px;
  }
</style>
</head>

<body>
<h1>Sudoku Solver</h1>

<table>
  <tbody>
    <script>
      for (let i = 0; i < 9; i++) {
        document.write("<tr>");
        for (let j = 0; j < 9; j++) {
          document.write(`<td><input id="c${i}${j}" maxlength="1"></td>`);
        }
        document.write("</tr>");
      }
    </script>
  </tbody>
</table>

<button onclick="solve()">Solve</button>
<button onclick="clearGrid()">Clear</button>

<script>
function solve() {
  let grid = [];

  // Read the grid
  for (let i = 0; i < 9; i++) {
    grid[i] = [];
    for (let j = 0; j < 9; j++) {
      let value = document.getElementById(`c${i}${j}`).value;
      grid[i][j] = value ? parseInt(value) : 0;
    }
  }

  if (sudoku(grid)) {
    // Write solution back
    for (let i = 0; i < 9; i++)
      for (let j = 0; j < 9; j++)
        document.getElementById(`c${i}${j}`).value = grid[i][j];
  } else {
    alert("No solution exists.");
  }
}

function clearGrid() {
  for (let i = 0; i < 9; i++)
    for (let j = 0; j < 9; j++)
      document.getElementById(`c${i}${j}`).value = "";
}

// ----- Solver Logic (Backtracking) -----
function sudoku(grid) {
  let empty = findEmpty(grid);
  if (!empty) return true;
  let [row, col] = empty;

  for (let num = 1; num <= 9; num++) {
    if (safe(grid, row, col, num)) {
      grid[row][col] = num;

      if (sudoku(grid)) return true;

      grid[row][col] = 0;
    }
  }
  return false;
}

function findEmpty(grid) {
  for (let i = 0; i < 9; i++)
    for (let j = 0; j < 9; j++)
      if (grid[i][j] === 0) return [i, j];
  return null;
}

function safe(grid, row, col, num) {
  for (let x = 0; x < 9; x++) {
    if (grid[row][x] === num) return false;
    if (grid[x][col] === num) return false;
  }

  let boxRow = Math.floor(row / 3) * 3;
  let boxCol = Math.floor(col / 3) * 3;

  for (let r = boxRow; r < boxRow + 3; r++)
    for (let c = boxCol; c < boxCol + 3; c++)
      if (grid[r][c] === num) return false;

  return true;
}
</script>
</body>
</html>

